
<div data-class="ProgressInd" class="progress-ind">
  <div>
    <img src="img/spinner.gif" />
  </div>
</div>

<div data-class="Header" class="header">
  <div class="col-xs-4 col-1">
    <button bind-event-click="history.back()">Back</button>
  </div>
  <div class="col-xs-4 col-2">
    ReadAloud.News
  </div>
  <div class="col-xs-4 col-3">
    <button>Pause</button>
  </div>
</div>

<div data-class="Footer" class="footer">
</div>

<div data-class="ItemList" class="item-list"
  bind-var-view-root="thisElem">
  <div class="item col-xs-12 col-sm-6 col-md-4"
    bind-repeater-i="#items.length"
    bind-event-click="$(#viewRoot).triggerHandler('select', #i)">
    <div class="number">{{#i+1}}</div>
    <div class="text">{{#items[#i]}}</div>
  </div>
</div>

<div data-class="SourcesPage" class="sources-page"
  bind-var-sources="null"
  bind-statement-1="#sources=null; this.loadSources().then(function(sources) {#sources=sources})"
  bind-statement-2="if (#active && #voiceEngine) this.speak(#voiceEngine, #sources)"
  bind-statement-3="$(thisElem).toggle(#active)">
  <div bind-view="Header"></div>
  <div bind-view="ItemList"
    bind-param-items="#sources"
    bind-event-select="location.href = '#/topics/' + event.data"></div>
  <div bind-view="Footer"></div>
  <div bind-view="ProgressInd"
    bind-statement-1="$(thisElem).toggle(#sources==null)"></div>
</div>

<div data-class="TopicsPage" class="topics-page"
  bind-var-topics="null"
  bind-statement-1="if (#sourceIndex==null) #topics=null; else this.loadSource(#sourceIndex).then(function(topics) {#topics=topics})"
  bind-statement-2="if (#active && #voiceEngine) this.speak(#voiceEngine, #topics)"
  bind-statement-3="$(thisElem).toggle(#active)">
  <div bind-view="Header"></div>
  <div bind-view="ItemList"
    bind-param-items="#topics"
    bind-event-select="location.href = '#/articles/' + #sourceIndex + '/' + event.data"></div>
  <div bind-view="Footer"></div>
  <div bind-view="ProgressInd"
    bind-statement-1="$(thisElem).toggle(#topics==null)"></div>
</div>

<div data-class="ArticlesPage" class="articles-page"
  bind-var-topic="null"
  bind-statement-1="if (#sourceIndex==null || #topicIndex==null) #topic=null; else this.loadTopic(#sourceIndex, #topicIndex).then(function(topic) {#topic=topic})"
  bind-statement-2="if (#active && #voiceEngine) this.speak(#voiceEngine, #topic)"
  bind-statement-3="$(thisElem).toggle(#active)">
  <div bind-view="Header"></div>
  <div bind-view="ItemList"
    bind-param-items="#topic.articles"
    bind-event-select="location.href = '#/reading/' + #sourceIndex + '/' + #topicIndex + '/' + event.data"></div>
  <div bind-view="Footer"></div>
  <div bind-view="ProgressInd"
    bind-statement-1="$(thisElem).toggle(#topic==null)"></div>
</div>

<div data-class="ReadingPage" class="reading-page"
  bind-var-article="null"
  bind-statement-1="if (#sourceIndex==null || #topicIndex==null || #articleIndex==null) #article=null; else this.loadArticle(#sourceIndex, #topicIndex, #articleIndex).then(function(article) {#article=article})"
  bind-statement-2="if (#active && #voiceEngine) this.speak(#voiceEngine, #article)"
  bind-statement-3="$(thisElem).toggle(#active)">
  <div bind-view="Header"></div>
  <div bind-view="ItemList"
    bind-param-items="['Next article', 'View original article']"
    bind-event-select="this.onSelect(event.data, #article)"></div>
  <div class="title">{{#article.title}}</div>
  <div bind-view="Footer"></div>
  <div bind-view="ProgressInd"
    bind-statement-1="$(thisElem).toggle(#article==null)"></div>
</div>
